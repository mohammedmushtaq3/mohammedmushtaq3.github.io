let survey="",siteUsersData=[];function callBackSiteUsers(t){initDatatable(JSON.parse(t))}function initDatatable(t){$.each(t.body.Items,(function(t,e){let a=new Date(e.created);siteUsersData.push([e.created,e.email,a.toString("YYYY-MM-dd")])}));let e=$("#site-survey-datatable").DataTable({pagingType:"simple",lengthChange:!1,info:!1,ordering:!1,filter:!0,data:siteUsersData,columns:[{title:""},{title:"Email"},{title:"Date"}],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:30,className:"details-control",data:null,defaultContent:""}]});$("#site-survey-datatable tbody").on("click","td.details-control",(function(){var t=e.row($(this).parents("tr")).data();showUserChart(t[0],t[1])}))}function showUserChart(t,e){$.ajax({url:"https://cors-anywhere.herokuapp.com/https://api.ahmedalnajjar.com/dev/survey",type:"post",dataType:"json",data:JSON.stringify({email:e,date:t}),contentType:"application/json",processData:!1,success:function(t){drawChart(t.body.Items[0].survey)},error:function(t,e,a){console.log(t,e,a)}})}function httpGetAsync(t,e,a){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&a(s.responseText)};var n="https://cors-anywhere.herokuapp.com/"+t;s.open(e,n,!0),s.send(null)}httpGetAsync("https://api.ahmedalnajjar.com/dev/survey","POST",callBackSiteUsers);