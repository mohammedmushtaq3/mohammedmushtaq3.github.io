$(document).ready((function(){let e=[],t=$("#site-survey-datatable").DataTable({pagingType:"simple",lengthChange:!1,info:!1,ordering:!1,filter:!0,data:e,columns:[{title:""},{title:"Email"},{title:"Date"}],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:30,className:"details-control",data:null,defaultContent:""}]});var a=document.querySelector("#user-report-chart canvas").chart;console.log(a),a.chart.config={type:"horizontalBar",data:{datasets:[{backgroundColor:["#dc3912","#ff9900","#109618","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#c845e6","#e6de45"]}]}},$.get(CORS+ENDPOINT+"/admin/surveys",null,(function(a){$.each(a.body.Items,(function(t,a){let n=new Date(a.created);e.push([a.created,a.email,n.toString("YYYY-MM-dd")])})),t.clear(),t.rows.add(e),t.draw()})),$("#site-survey-datatable tbody").on("click","td.details-control",(function(){var e=t.row($(this).parents("tr")).data();$.post(CORS+ENDPOINT+"/survey",JSON.stringify({email:e[1],date:e[0]}),(function(e,t,n){"200"==e.statusCode&&function(e){var t={};let n=[],o=[];null!=e&&($.each(e.sections,(function(e,a){let s=a.totalQuestions/(5*a.totalQuestions),l=0;$.each(a.questions,(function(e,a){l+=a.value*s,t[a.en]=a.value}));let r=100*l/a.totalQuestions;"scale"===a.sectionType&&(n.push(a.title.en),o.push(parseFloat(r.toFixed(1))))})),function(e,t){a.data.labels=e,a.data.datasets[0].data=t,a.update()}(n,o));jQuery.isEmptyObject(e)||$("#check-list-graph").removeClass("d-none");jQuery.isEmptyObject(t)||function(e){$("#user-report-questions").removeClass("d-none"),$("#filledSurvey").html(surveyContent),showTab(currentTab),js2form(document.getElementById("filledSurvey"),e)}(t)}(e.body.Items[0].survey)}),"json")}))}));