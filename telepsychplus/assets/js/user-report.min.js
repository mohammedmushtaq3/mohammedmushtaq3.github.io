$(document).ready((function(){let e=[],t=$("#site-survey-datatable").DataTable({pagingType:"simple",lengthChange:!1,info:!1,ordering:!1,filter:!0,data:e,columns:[{title:""},{title:"Email"},{title:"Date"}],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:30,className:"details-control",data:null,defaultContent:""}]});var a=document.querySelector("#user-report-chart canvas").chart;console.log(a),a.chart.config={type:"horizontalBar",data:{datasets:[{backgroundColor:["#dc3912","#ff9900","#109618","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#c845e6","#e6de45"]}]},responsive:!0},a.chart.options={title:{display:!0,text:"Behaviour Chart",position:"top",fontSize:14},scales:{xAxes:[{ticks:{beginAtZero:!0,max:100},gridLines:{display:!1}}],yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1},layout:{padding:{left:50,right:50,top:0,bottom:0}}},$.get(CORS+ENDPOINT+"/admin/surveys",null,(function(a){$.each(a.body.Items,(function(t,a){let o=new Date(a.created);e.push([a.created,a.email,o.toString("YYYY-MM-dd")])})),t.clear(),t.rows.add(e),t.draw()})),$("#site-survey-datatable tbody").on("click","td.details-control",(function(){var e=t.row($(this).parents("tr")).data();$.post(CORS+ENDPOINT+"/survey",JSON.stringify({email:e[1],date:e[0]}),(function(e,t,o){"200"==e.statusCode&&function(e){var t={};let o=[],s=[];null!=e&&($.each(e.sections,(function(e,a){let n=a.totalQuestions/(5*a.totalQuestions),l=0;$.each(a.questions,(function(e,a){l+=a.value*n,t[a.en]=a.value}));let i=100*l/a.totalQuestions;"scale"===a.sectionType&&(o.push(a.title.en),s.push(parseFloat(i.toFixed(1))))})),function(e,t){a.data.labels=e,a.data.datasets[0].data=t,a.update()}(o,s));jQuery.isEmptyObject(e)||$("#check-list-graph").removeClass("d-none");jQuery.isEmptyObject(t)||function(e){$("#user-report-questions").removeClass("d-none"),$("#filledSurvey").html(surveyContent),showTab(currentTab),js2form(document.getElementById("filledSurvey"),e)}(t)}(e.body.Items[0].survey)}),"json")}))}));