var calendarEl=document.getElementById("calendar"),calendar=new FullCalendar.Calendar(calendarEl,{contentHeight:400,expand:!0,navLinks:!0,selectable:!1,nowIndicator:!0,selectable:!0,selectOverlap:!1,dayMaxEvents:!0,stickyHeaderDates:!0,initialView:"dayGridMonth",headerToolbar:{left:"prev,next today adminFilter",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},customButtons:{adminFilter:{text:"Filter",click:function(){}}},slotEventOverlap:!1,slotDuration:{minutes:15},businessHours:{startTime:"08:00",endTime:"17:00"},selectConstraint:"businessHours",select:function(e){console.log("information - ",e);let t=new Date,n=new Date(e.startStr),a=new Date(e.endStr);"timeGridDay"==e.view.type&&n>t?($("#new-appointment-modal").modal("show"),$("#new-appointment-modal input[name='start']").val(moment(n).format("YYYY-MM-DDTHH:mm")),$("#new-appointment-modal input[name='end']").val(moment(a).format("YYYY-MM-DDTHH:mm"))):$.toast({icon:"warning",text:"<p class='p-3'>Cannot Select Past Slot</p>",delay:"3000",position:"top-right",dismissible:!1})},eventSources:[{googleCalendarId:"c_j069ujv4s0ses3o58rbd99qcac@group.calendar.google.com",googleCalendarApiKey:"AIzaSyCfv18Yh96KZSjrfF0YVCpdmdmltvtPNNA",className:"gcal-event"}],eventDataTransform:function(e){return e},eventClick:function(e){let t=e.event._def.title,n=e.event._def.extendedProps.description,a=e.event._def.extendedProps.location,o=e.event.url;$("#event-text").html(t),$("#event-description").html(n),$("#event-location").html(a),$("#event-url").attr("href",o),$("#appointment-details-modal").modal("show"),e.jsEvent.preventDefault()}});calendar.render(),$("#create-appointment-form").on("submit",(function(e){e.preventDefault();let t=form2js(this,".",!0,null);t.start=new Date(t.start).toISOString(),t.end=new Date(t.end).toISOString(),$.ajax({url:ENDPOINT+"/appointments",method:"POST",crossDomain:!0,dataType:"json",data:JSON.stringify(t),processData:!1}).done((function(e){201!=e.statusCode||e.hasOwnProperty("message")?$(".error-msg").removeClass("d-none").html(e.message):($(".modal").modal("hide"),$.toast({icon:"success",text:"<p class='p-3'>Appointment Registered Successful</p>",delay:"5000",position:"top-right",dismissible:!1}),$("#create-user").trigger("reset"),getResponse("/admin/users",null,populateUsersTable))})).fail((function(e){console.log("error - ",e),$.toast({icon:"danger",text:"<p class='p-3'>Appointment Registration Failed</p>",delay:"3000",position:"top-right",dismissible:!1})}))}));