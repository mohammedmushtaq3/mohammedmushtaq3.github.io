var dataSet=[];let usersTable=$("#users-datatable").DataTable({pagingType:"simple",length:!1,info:!1,paging:!1,ordering:!1,filter:!0,data:dataSet,stripeClasses:[],processing:!0,columns:[{title:""},{title:"Email"}],columnDefs:[{searchable:!1,orderable:!1,targets:0,width:30,className:"details-control",data:"sub",defaultContent:""}]});function populateUsersTable(e){null!=e.paginationToken&&sessionStorage.setItem("users_paging_token",e.PaginationToken),e.data.forEach(e=>{dataSet.push([e.sub,e.email])}),usersTable.clear().draw(),usersTable.rows.add(dataSet),usersTable.draw()}function showUserDetails(e,s){$.showModal({title:s,body:"userId"})}getResponse("/admin/users",null,populateUsersTable),$("#users-datatable tbody").on("click","td.details-control",(function(){var e=usersTable.row($(this).parents("tr")).data();showUserDetails(e[0],e[1])})),usersTable.on("search.dt",(function(){searchDate=$("#users-datatable_filter label input[type=search]").val(),searchDate.length})),$("#send-invite").change((function(){this.checked?$("#send-invite-email,#send-invite-sms").removeAttr("disabled"):$("#send-invite-email, #send-invite-sms").attr("disabled","disabled")})),1==$("#send-invite-sms").prop("checked")&&$("#new-user-phone").val(),$("#create-user").on("submit",(function(e){if(e.preventDefault(),1==$("#send-invite").prop("checked")&&1==$("#send-invite-sms").prop("checked")&&""==$("#new-user-phone").val())return void $(".error-msg").removeClass("d-none").html("You must enter a phone number if SMS is checked as a desired delivery medium.");let s=form2js("create-user",".",!0,null);console.log("create user form data - ",s),$.ajax({url:CORS+ENDPOINT+"/admin/users",method:"POST",crossDomain:!0,dataType:"json",data:JSON.stringify(s),processData:!1}).done((function(e){201!=e.statusCode||e.hasOwnProperty("message")?$(".error-msg").removeClass("d-none").html(e.message):($(".modal").modal("hide"),$.toast({icon:"success",text:"<p class='p-3'>User Create Successful</p>",delay:"5000",position:"top-right",dismissible:!1}),$("#create-user").trigger("reset"),getResponse("/admin/users",null,populateUsersTable))})).fail((function(e){console.log("error - ",e),$.toast({icon:"danger",text:"<p class='p-3'>Unable to Create User</p>",delay:"3000",position:"top-right",dismissible:!1})}))}));