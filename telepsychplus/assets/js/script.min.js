$(document).ready((function(){$("[data-bs-tooltip]").tooltip(),$("[data-bs-chart]").each((function(t,e){this.chart=new Chart($(e),$(e).data("bs-chart"))}))}));const CORS="";sessionStorage.clear();const ENDPOINT="https://api.ahmedalnajjar.com/dev";window._config={cognito:{userPoolId:"us-east-1_InedFezwr",region:"us-east-1",clientId:"2g2q4svd2pg3lro7jv9ae5q59h"}};let poolData={UserPoolId:_config.cognito.userPoolId,ClientId:_config.cognito.clientId};function getResponse(t,e,n){$.ajax({url:""+ENDPOINT+t,type:"get",dataType:"json",data:e,contentType:"application/json"}).done((function(t){n(t)})).fail((function(t){console.log("error -",t)})).always((function(t){}))}if($("#patient-select").select2({placeholder:"Select a Patient",width:"75%",ajax:{delay:250,url:ENDPOINT+"/admin/users",data:function(t){var e={filter_name:$("#patient-filter-name").val(),filter_value:t.term,limit:10};return"query:append"===t._type&&""!=sessionStorage.getItem("patient_select_pagination_token")&&(e.PaginationToken=sessionStorage.getItem("patient_select_pagination_token"),sessionStorage.setItem("patient_select_pagination_token","")),e},processResults:function(t){t.hasOwnProperty("PaginationToken")?sessionStorage.setItem("patient_select_pagination_token",t.PaginationToken):sessionStorage.setItem("patient_select_pagination_token","");var e=[],n=$("#patient-filter-name").val();return e.push({id:"",text:"All"}),t.data.forEach((function(t,i){e.push({id:t.sub,text:t[n]})})),{results:e}}}}),$("#form-reset").on("click",(function(){$("#patient-select").empty()})),$("#patient-select").on("select2:select",(function(t){var e=t.params.data.id,n=ENDPOINT+"/admin/users?filter_name=sub&filter_value="+e;$.get(n,(function(t){$("#patient-email").val(t.data[0].email)}))})),$(".tel-phone-input").length&&$(".tel-phone-input").intlTelInput({preferredCountries:["ae"],utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.8/build/js/utils.js"}),$(".countries-list").length){$(".countries-list").select2({width:"100%"});var countryData=window.intlTelInputGlobals.getCountryData();addressDropdown=document.querySelector(".countries-list");for(var i=0;i<countryData.length;i++){var country=countryData[i],optionNode=document.createElement("option");optionNode.value=country.name;var textNode=document.createTextNode(country.name);optionNode.appendChild(textNode),addressDropdown.appendChild(optionNode)}}function findAge(t){return moment().diff(t,"years",!1)}function renderUserHtml(t){return`<div class="row m-1 py-3 small rounded shadow">\n                <div class="col-sm-auto text-center">\n                  <img class="w-100" style="max-width: 100px;" src=${null!=t.picture?t.picture:"user.svg"} />\n                </div>\n                <div class="col">\n                    <div class="row">\n                        <div class="col">\n                        <h6 class="text-capitalize mb-0 font-weight-bold">\n                        ${null!=t.given_name?t.given_name+" ":""}\n                        ${null!=t.middle_name?t.middle_name+" ":""}\n                        ${null!=t.family_name?t.family_name+" ":""}\n                        </h6>\n                            <p>${t.email}</p>\n                            ${null!=t.birthdate?`<p class="mb-0"><strong>DOB</strong>: ${t.birthdate}</p>`:""}\n                            ${null!=t.birthdate?`<p class="mb-0"><strong>Age</strong>: ${findAge(t.birthdate)} Years</p>`:""}\n                        </div>\n                        <div class="col">\n                        ${null!=t.locale?`<p class="mb-0"><strong>Nationality</strong>: ${t.locale}</p>`:""}\n                            ${null!=t.phone_number?`<p class="mb-0"><strong>Phone</strong>: ${t.phone_number}</p>`:""}\n                            ${null!=t.address?`<p class="mb-0"><strong>Address</strong>: ${t.address}</p>`:""}\n                            ${null!=t.preferred_username?`<p class="mb-0"><strong>Emirates ID</strong>: ${t.preferred_username}</p>`:""}\n                        </div>\n                    </div>\n                </div>\n            </div>`}function eventTimeToString(t,e){return`${moment(t).format("LL")} - ${moment(e).format("LT")}`}function serviceDetails(t){return`${null!=t.service_type?t.service_type+" | ":""} \n  ${null!=t.service_amount?""+t.service_amount:""}\n  ${null!=t.service_currency?t.service_currency+" | ":""}\n  ${null!=t.service_duration?t.service_duration+" min | ":""}\n  ${null!=t.service_desc?t.service_desc+" ":""};\n  `}function renderAppointmentHtml(t){return htmlContent=`<div class="row m-1 py-3 small rounded shadow" >\n    <div class="col">\n        <div class="row">\n            <div class="col">\n                <p class="font-weight-bold mb-0" style="font-size:1rem;">Meeting with ${t.extendedProperties.private.patient_email||"-"}</p>\n                <p class="mb-2">${eventTimeToString(t.start.dateTime,t.end.dateTime)}</p>\n            </div>\n            <div class="col-auto">\n                <p class="mb-1"><strong>File No. </strong> ${t.extendedProperties.private.file_no}</p>\n            </div>\n        </div>\n        <p class="mb-1"><strong>Chief Complaint: </strong> ${t.extendedProperties.private.chief_complaint||"-"}</p>\n        <p class="mb-1"><strong>Location: </strong> ${t.location||"-"}</p>\n        <p class="mb-1"><strong>Service Details: </strong> ${serviceDetails(t.extendedProperties.private)} \n        </p>`,t.organizer.email==t.extendedProperties.private.creator_email?htmlContent+=`<p class="mb-0"><strong>Doctor: </strong>${t.organizer.displayName||t.organizer.email}</p>`:htmlContent+=`<p class="mb-0"><strong>Doctor: </strong>${t.organizer.email}</p>\n                    <p class="mb-1">Created By ${t.organizer.displayName||t.organizer.email}</p>`,htmlContent+=`<div class="row">\n                    <div class="col">\n                        <p class="mb-1"><strong>Status: </strong>${t.extendedProperties.private.status}</p>`,null!=t.extendedProperties.private.meeting_link&&(htmlContent+=`<p class="mb-1"><strong>Meeting: </strong><a href="${t.extendedProperties.private.meeting_link}" target="_blank" >Start Meeting</a></p>`),htmlContent+="</div>",htmlContent+='  <div class="col">',null!=t.extendedProperties.private.payment_ref&&(htmlContent+=`    <p class="mb-1"><strong>Payment Ref: </strong> ${t.extendedProperties.private.payment_ref} </p>`),null!=t.extendedProperties.private.amount&&(htmlContent+=`    <p class="mb-1"><strong>Payment Type: </strong> ${t.extendedProperties.private.payment_type} </p>`),htmlContent+="   </div>",htmlContent+=`</div>\n                <button class="btn btn-outline-primary btn-sm m-1" type="button" data-action="profile" data-id='${t.extendedProperties.private.patient_id}'>USER PROFILE</button>`,"pending"==t.extendedProperties.private.status&&(htmlContent+=`<button class="btn btn-outline-primary btn-sm m-1" type="button" data-action="confirm" data-event-id='${t.id}'>CONFIRM</button>`),null!=t.extendedProperties.private.payment_status&&"paid"==t.extendedProperties.private.payment_status&&(htmlContent+=`<button class="btn btn-outline-primary btn-sm m-1" type="button" data-action="invoice" data-event-id='${t.id}' >INVOICE</button>`),htmlContent+=`<button class="btn btn-outline-primary btn-sm m-1" type="button" data-action="reschedule" data-event-id='${t.id}'>RESCHEDULE</button>\n                <button class="btn btn-outline-primary btn-sm m-1" type="button" data-action="pt-dashboard" data-event-id='${t.extendedProperties.private.patient_id}'>PATIENT DASHBOARD</button>\n                </div>\n        </div>`,htmlContent}function signInButton(){var t={Username:document.getElementById("inputUsername").value,Password:document.getElementById("inputPassword").value},e=new AmazonCognitoIdentity.AuthenticationDetails(t),n=new AmazonCognitoIdentity.CognitoUserPool(poolData),i={Username:document.getElementById("inputUsername").value,Pool:n};new AmazonCognitoIdentity.CognitoUser(i).authenticateUser(e,{onSuccess:function(t){User.accessToken=t.getAccessToken().getJwtToken(),User.role=t.idToken.payload["cognito:groups"][0]?t.idToken.payload["cognito:groups"][0]:"patient",console.log("user details - ",User),User.loginResponse=t},onFailure:function(t){console.log(t.message||JSON.stringify(t))}})}function signUpButton(){var t=new AmazonCognitoIdentity.CognitoUserPool(poolData),e=[],n=new AmazonCognitoIdentity.CognitoUserAttribute({Name:"email",Value:"........."}),i=new AmazonCognitoIdentity.CognitoUserAttribute({Name:"phone_number",Value:"...................."});e.push(n),e.push(i),t.signUp("username","password",e,null,(function(t,e){if(t)alert(t.message||JSON.stringify(t));else{var n=e.user;console.log("user name is "+n.getUsername())}}))}var userPool=new AmazonCognitoIdentity.CognitoUserPool(poolData),cognitoUser=userPool.getCurrentUser();function getUserGroups(){return cognitoUser.getSession((function(t,e){if(!t)return result.idToken.payload["cognito:groups"]?result.idToken.payload["cognito:groups"][0]:"patient";alert(t)})),null}function logOut(){sessionStorage.clear(),cognitoUser.signOut()}function cptDesc(){$.showModal({title:"CPT",body:'<div class="table-responsive">\n    <table class="table">\n        <thead>\n            <tr>\n                <th>Code</th>\n                <th>Description</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>90801</td>\n                <td>Psychiatric diagnostic interview examination</td>\n            </tr>\n            <tr>\n                <td>90802</td>\n                <td>Interactive psychiatric diagnostic interview examination using play equipment, physical devices, language interpreter, or other mechanisms of communication</td>\n            </tr>\n            <tr>\n                <td>90804</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90805</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90806</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90807</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90808</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90809</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90810</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90811</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90812</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90813</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90814</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90815</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90816</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90817</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90818</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90819</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90821</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90822</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90823</td>\n                <td>Cell 4</td>\n            </tr>\n            <tr>\n                <td>90824</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90826</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90827</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90828</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90829</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90845</td>\n                <td>Psychoanalysis</td>\n            </tr>\n            <tr>\n                <td>90846</td>\n                <td>Family psychotherapy (without the patient present)</td>\n            </tr>\n            <tr>\n                <td>90847</td>\n                <td>Family psychotherapy (conjoint psychotherapy) (with patient present)</td>\n            </tr>\n            <tr>\n                <td>90849</td>\n                <td>Multiple-family group psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90853</td>\n                <td>Group psychotherapy (other than of a multiple-family group)</td>\n            </tr>\n            <tr>\n                <td>90857</td>\n                <td>Interactive group psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90862</td>\n                <td>Pharmacologic management, including prescription, use, and review of medication with no more than minimal medical psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90865</td>\n                <td>Narcosynthesis for psychiatric diagnostic and therapeutic purposes (eg, sodium amobarbital (Amytal) interview)</td>\n            </tr>\n            <tr>\n                <td>90870</td>\n                <td>Electroconvulsive therapy (includes necessary monitoring)</td>\n            </tr>\n            <tr>\n                <td>90875</td>\n                <td>Individual psychophysiological therapy incorporating biofeedback training by any modality (face-to-face with the patient), with psychotherapy (eg, insight oriented, behavior modifying or supportive psychotherapy); approximately 20-30 minutes</td>\n            </tr>\n            <tr>\n                <td>90876</td>\n                <td>Individual psychophysiological therapy incorporating biofeedback training by any modality (face-to-face with the patient), with psychotherapy (eg, insight oriented, behavior modifying or supportive psychotherapy); approximately 45-50 minutes</td>\n            </tr>\n            <tr>\n                <td>90880</td>\n                <td>Hypnotherapy</td>\n            </tr>\n            <tr>\n                <td>90882</td>\n                <td>Environmental intervention for medical management purposes on a psychiatric patient&#39;s behalf with agencies, employers, or institutions</td>\n            </tr>\n            <tr>\n                <td>90885</td>\n                <td>Psychiatric evaluation of hospital records, other psychiatric reports, psychometric and/or projective tests, and other accumulated data for medical diagnostic purposes</td>\n            </tr>\n            <tr>\n                <td>90887</td>\n                <td>Interpretation or explanation of results of psychiatric, other medical examinations and procedures, or other accumulated data to family or other responsible persons, or advising them how to assist patient</td>\n            </tr>\n            <tr>\n                <td>90889</td>\n                <td>Preparation of report of patient&#39;s psychiatric status, history, treatment, or progress (other than for legal or consultative purposes) for other physicians, agencies, or insurance carriers</td>\n            </tr>\n            <tr>\n                <td>90899</td>\n                <td>Unlisted psychiatric service or procedure</td>\n            </tr>\n            <tr>\n                <td>96101</td>\n                <td>PSYCHOLOGICAL TESTING PR HR WITH PATIENT</td>\n            </tr>\n            <tr>\n                <td>96150</td>\n                <td>HLTH&amp;BEHAVIOR ASSMT EA 15 MIN W/PT 1ST ASSMT</td>\n            </tr>\n        </tbody>\n    </table>\n</div>'})}null!=cognitoUser&&cognitoUser.getSession((function(t,e){t?alert(t):e.isValid()||logOut()})),$("#adults-form, #claim-form").on("submit",(function(t){t.preventDefault();var e=$(".form").serialize();console.log("queryString - ",e),$.ajax({url:cors+"https://api.ahmedalnajjar.com/dev/",type:"POST",dataType:"json",data:JSON.stringify({formData:e}),contentType:"application/json;",cache:!1}).done((function(t){console.log("response - ",t)})).fail((function(t){console.log("error ajax")})).always((function(t){}))}));