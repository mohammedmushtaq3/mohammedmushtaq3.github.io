$(document).ready((function(){$("[data-bs-tooltip]").tooltip(),$("[data-bs-chart]").each((function(t,e){this.chart=new Chart($(e),$(e).data("bs-chart"))}))})),function(t){t.toast=function(e,n,a,i,o){t("#toast-container").length||(t("body").prepend('<div id="toast-container" aria-live="polite" aria-atomic="true"></div>'),t("#toast-container").append('<div id="toast-wrapper"></div>'));var r="",s="",d="text-muted",c="",l="object"==typeof e?e.title||"":e||"Notice!";switch(n="object"==typeof e?e.subtitle||"":n||"",a="object"==typeof e?e.content||"":a||"",o="object"==typeof e?e.delay||3e3:o||3e3,"object"==typeof e?e.type||"":i||"info"){case"info":r="bg-info",c=d=s="text-white";break;case"success":r="bg-success",c=d=s="text-white";break;case"warning":case"warn":r="bg-warning",c=d=s="text-white";break;case"error":case"danger":r="bg-danger",c=d=s="text-white"}e='<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="'+o+'"><div class="toast-header '+r+" "+s+'"><strong class="mr-auto">'+l+"</strong>",e+='<small class="'+d+'">'+n+"</small>",e+='<button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">',e+='<span aria-hidden="true" class="'+c+'">&times;</span>',e+="</button>",e+="</div>",""!==a&&(e+='<div class="toast-body">',e+=a,e+="</div>"),e+="</div>",t("#toast-wrapper").append(e),t("#toast-wrapper .toast:last").toast("show")}}(jQuery);const cors="https://cors-anywhere.herokuapp.com/";sessionStorage.clear(),$.toastDefaults={position:"top-right",dismissible:!0,stackable:!0,pauseDelayOnHover:!0,style:{toast:"",info:"",success:"",warning:"",error:""}};const endpoint="https://api.ahmedalnajjar.com/dev/";function printForm(t){$(".page-header");console.log("header size - ",$(`iframe[name="${t}"`).contents().find(".page-header").height(),$(`iframe[name="${t}"`).contents().find(".page-footer").height());let e=$(`iframe[name="${t}"`).contents().find(".page-header").height(),n=$(`iframe[name="${t}"`).contents().find(".page-footer").height();void 0===e&&(e=0),void 0===n&&(n=0),e+=10,n+=10,console.log("set header  - ",e,n),$(`iframe[name="${t}"`).contents().find(".style").text(`@media print {.page-header-space { height: ${e}px!important;} .page-footer-space {height: ${n}px!important;}}`),window.frames[t].print()}function resizeHeaderFooter(){let t=$("header").height(),e=$("footer").height();void 0===t&&(t=0),void 0===e&&(e=0),t+=10,e+=10,$(".style").text(`@media print {.page-header-space { height: ${t}px!important;} .page-footer-space {height: ${e}px!important;}}`)}if(resizeHeaderFooter(),document.body.contains(document.getElementById("signature-1"))){var canvas=document.getElementById("signature-1"),signaturePad1=new SignaturePad(canvas,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"rgb(0, 0, 0)",velocityFilterWeight:.7,minWidth:.5,maxWidth:2.5,throttle:16,minPointDistance:3,onEnd:function(){var t=$("#signature-input-1").val(signaturePad1.toDataURL());console.log("sign-1 - ",t.val())}});function resizeCanvas1(){var t=Math.max(window.devicePixelRatio||1,1);canvas.width=canvas.offsetWidth*t,canvas.height=canvas.offsetHeight*t,canvas.getContext("2d").scale(t,t)}document.getElementById("sign-lock-1").addEventListener("click",(function(t){console.log(this.childNodes[0].className),"fa fa-unlock-alt"==this.childNodes[0].className?(this.childNodes[0].className="fa fa-lock",signaturePad1.off()):(this.childNodes[0].className="fa fa-unlock-alt",signaturePad1.on())})),document.getElementById("clear-1").addEventListener("click",(function(){"fa fa-lock"!=document.getElementById("sign-lock-1").childNodes[0].className&&signaturePad1.clear()})),document.getElementById("upload-sign-1").addEventListener("click",(function(){document.getElementById("sign-upload-1").trigger("click")})),window.onresize=resizeCanvas1,resizeCanvas1()}if(document.body.contains(document.getElementById("signature-2"))){var canvas2=document.getElementById("signature-2"),signaturePad2=new SignaturePad(canvas2,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"rgb(0, 0, 0)",velocityFilterWeight:.7,minWidth:.5,maxWidth:2.5,throttle:16,minPointDistance:3,onEnd:function(){$("#signature-input-2").val(signaturePad1.toDataURL());console.log("sign-2 - ",sign2.val())}});function resizeCanvas2(){var t=Math.max(window.devicePixelRatio||1,1);canvas2.width=canvas2.offsetWidth*t,canvas2.height=canvas2.offsetHeight*t,canvas2.getContext("2d").scale(t,t)}document.getElementById("sign-lock-2").addEventListener("click",(function(t){console.log(this.childNodes[0].className),"fa fa-unlock-alt"==this.childNodes[0].className?(this.childNodes[0].className="fa fa-lock",signaturePad2.off()):(this.childNodes[0].className="fa fa-unlock-alt",signaturePad2.on())})),document.getElementById("clear-2").addEventListener("click",(function(){"fa fa-lock"!=document.getElementById("sign-lock-2").childNodes[0].className&&signaturePad2.clear()})),document.getElementById("upload-sign-2").addEventListener("click",(function(){document.getElementById("sign-upload-2").trigger("click")})),window.onresize=resizeCanvas2,resizeCanvas2()}function logOut(){sessionStorage.clear()}function cptDesc(){$.showModal({title:"CPT",body:'<div class="table-responsive">\n    <table class="table">\n        <thead>\n            <tr>\n                <th>Code</th>\n                <th>Description</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>90801</td>\n                <td>Psychiatric diagnostic interview examination</td>\n            </tr>\n            <tr>\n                <td>90802</td>\n                <td>Interactive psychiatric diagnostic interview examination using play equipment, physical devices, language interpreter, or other mechanisms of communication</td>\n            </tr>\n            <tr>\n                <td>90804</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90805</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90806</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90807</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90808</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90809</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90810</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90811</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90812</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90813</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90814</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90815</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an office or outpatient facility, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90816</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90817</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90818</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90819</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90821</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90822</td>\n                <td>Individual psychotherapy, insight oriented, behavior modifying and/or supportive, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90823</td>\n                <td>Cell 4</td>\n            </tr>\n            <tr>\n                <td>90824</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 20 to 30 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90826</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90827</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 45 to 50 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90828</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient;</td>\n            </tr>\n            <tr>\n                <td>90829</td>\n                <td>Individual psychotherapy, interactive, using play equipment, physical devices, language interpreter, or other mechanisms of non-verbal communication, in an inpatient hospital, partial hospital or residential care setting, approximately 75 to 80 minutes face-to-face with the patient; with medical evaluation and management services</td>\n            </tr>\n            <tr>\n                <td>90845</td>\n                <td>Psychoanalysis</td>\n            </tr>\n            <tr>\n                <td>90846</td>\n                <td>Family psychotherapy (without the patient present)</td>\n            </tr>\n            <tr>\n                <td>90847</td>\n                <td>Family psychotherapy (conjoint psychotherapy) (with patient present)</td>\n            </tr>\n            <tr>\n                <td>90849</td>\n                <td>Multiple-family group psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90853</td>\n                <td>Group psychotherapy (other than of a multiple-family group)</td>\n            </tr>\n            <tr>\n                <td>90857</td>\n                <td>Interactive group psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90862</td>\n                <td>Pharmacologic management, including prescription, use, and review of medication with no more than minimal medical psychotherapy</td>\n            </tr>\n            <tr>\n                <td>90865</td>\n                <td>Narcosynthesis for psychiatric diagnostic and therapeutic purposes (eg, sodium amobarbital (Amytal) interview)</td>\n            </tr>\n            <tr>\n                <td>90870</td>\n                <td>Electroconvulsive therapy (includes necessary monitoring)</td>\n            </tr>\n            <tr>\n                <td>90875</td>\n                <td>Individual psychophysiological therapy incorporating biofeedback training by any modality (face-to-face with the patient), with psychotherapy (eg, insight oriented, behavior modifying or supportive psychotherapy); approximately 20-30 minutes</td>\n            </tr>\n            <tr>\n                <td>90876</td>\n                <td>Individual psychophysiological therapy incorporating biofeedback training by any modality (face-to-face with the patient), with psychotherapy (eg, insight oriented, behavior modifying or supportive psychotherapy); approximately 45-50 minutes</td>\n            </tr>\n            <tr>\n                <td>90880</td>\n                <td>Hypnotherapy</td>\n            </tr>\n            <tr>\n                <td>90882</td>\n                <td>Environmental intervention for medical management purposes on a psychiatric patient&#39;s behalf with agencies, employers, or institutions</td>\n            </tr>\n            <tr>\n                <td>90885</td>\n                <td>Psychiatric evaluation of hospital records, other psychiatric reports, psychometric and/or projective tests, and other accumulated data for medical diagnostic purposes</td>\n            </tr>\n            <tr>\n                <td>90887</td>\n                <td>Interpretation or explanation of results of psychiatric, other medical examinations and procedures, or other accumulated data to family or other responsible persons, or advising them how to assist patient</td>\n            </tr>\n            <tr>\n                <td>90889</td>\n                <td>Preparation of report of patient&#39;s psychiatric status, history, treatment, or progress (other than for legal or consultative purposes) for other physicians, agencies, or insurance carriers</td>\n            </tr>\n            <tr>\n                <td>90899</td>\n                <td>Unlisted psychiatric service or procedure</td>\n            </tr>\n            <tr>\n                <td>96101</td>\n                <td>PSYCHOLOGICAL TESTING PR HR WITH PATIENT</td>\n            </tr>\n            <tr>\n                <td>96150</td>\n                <td>HLTH&amp;BEHAVIOR ASSMT EA 15 MIN W/PT 1ST ASSMT</td>\n            </tr>\n        </tbody>\n    </table>\n</div>'})}$("#adults-form, #claim-form").on("submit",(function(t){t.preventDefault();var e=$(".form").serialize();console.log("queryString - ",e),$.ajax({url:cors+"https://api.ahmedalnajjar.com/dev/",type:"POST",dataType:"json",data:JSON.stringify({formData:e}),contentType:"application/json;",cache:!1}).done((function(t){console.log("response - ",t)})).fail((function(t){console.log("error ajax")})).always((function(t){}))})),$("#survey-form-mail").on("submit",(function(t){t.preventDefault(),sessionStorage.setItem("survey_mail",$("#survey-mail").val()),$("survey-form-mail").css("display","none"),takeSurvey(),$("#survey-table").css("display","block")}));var response="";if("200"==(response=default_survey).statusCode){var data=response.body,surveyContent="";surveyContent+='<div class="text-center py-3">';for(var i=data.sections.length;i>0;i--)surveyContent+='<span class="step"></span>';surveyContent+="</div>",data.sections.forEach(t=>{surveyContent+=`<div class="tab">\n                        <h2 class="text-center">${t.title.en}</h2>\n                        <h3 class="arabic-text text-center">${t.title.ar}</h3>`,"scale"===t.sectionType?(t.questions.forEach(t=>{surveyContent+=`<hr/><div class="form-group">\n                              <p>${t.en}</p>\n                              <p class="arabic-text text-right">${t.ar}</p>`,surveyContent+='<table class="table-borderless"><tr>',$.each(t.labels,(function(t,e){surveyContent+=`<th><span class="label"> ${e.label.en}</span></th>`})),surveyContent+="</tr><tr>",$.each(t.labels,(function(e,n){surveyContent+=`<td class="text-center">\n            <input type="radio" name="${t.en}" value="${n.label.value}">\n            </td>`})),surveyContent+="</tr></table>",surveyContent+="</div>"}),surveyContent+="</div>"):"boolean"===t.sectionType&&(t.questions.forEach(t=>{surveyContent+=`<hr/><div class="form-group">\n                              <p>${t.en}</p>\n                              <p class="arabic-text text-right">${t.ar}</p>\n                                    <table class="table-borderless">\n                                      <tr>\n                                            <th>TRUE</th>\n                                            <th>FALSE</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="text-center"><input type="radio" name="${t.en}" value="true"></td>\n                                            <td class="text-center"><input type="radio" name="${t.en}" value="false"></td>\n                                        </tr>\n                                    </table>\n                          </div>`}),surveyContent+="</div>")})}function takeSurvey(){$("#surveyForm").html(surveyContent),showTab(currentTab)}function onSurveySubmit(){var t=response.body;let e={},n=!1;e.name=t.name,e.description=t.description,e.created=t.created,e.updated=t.updated,e.sections=[],t.sections.forEach(t=>{let a={};a.title=t.title,a.questions=[],a.totalQuestions=0,a.sectionType=t.sectionType,t.questions.forEach(t=>{if(a.totalQuestions+=1,$(`input[name="${t.en}"]:checked`).val()){n=!0;let e={};e.en=t.en,e.ar=t.ar,e.value=$(`input[name="${t.en}"]:checked`).val(),a.questions.push(e)}}),n&&e.sections.push(a),n=!1});let a={};null!=sessionStorage.getItem("email")?a.email=sessionStorage.getItem("email"):null!=sessionStorage.getItem("uid")&&(a.uid=sessionStorage.getItem("uid")),a.survey=e,console.log("Submit FORM "+JSON.stringify(a)),$("#bootstrap-show-modal-0").modal("hide"),$.ajax({url:cors+endpoint+"/survey",method:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(a),processData:!1,success:function(t){$.toast({content:"successful submitted survey",type:"success",delay:"3000",dismissible:!0})},error:function(t,e,n){console.log(t,e,n)}})}